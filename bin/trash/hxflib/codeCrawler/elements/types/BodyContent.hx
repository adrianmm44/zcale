/////////////////////////////////////////////////////////////////////////////////////////////////////////

package hxflib.codeCrawler.elements.types;

import hxflib.codeCrawler.CodeElement;
import hxflib.codeCrawler.interfaces.ICodeElement;

class BodyContent extends CodeElement implements ICodeElement
{
	/////////////////////////////////////////////////////////////////////////////////////////////////////
	
	public function new( reg : Dynamic )
	{
		super( this, reg, "{" );
		
		this.closeChar  = "}";
		this.isLastElement = true;
	}
	
	/////////////////////////////////////////////////////////////////////////////////////////////////////
	
	public function newInstance() : ICodeElement
	{
		return new BodyContent( registry );
	}
	
	/////////////////////////////////////////////////////////////////////////////////////////////////////
	
	public function tryToParse() : Void
	{
		var closeIndex : Int = modules.current.code.lastIndexOf("}");
		
		syntax = "\n" + modules.current.code.read( closeIndex );

		modules.current.code.index += closeIndex + 1;
		
		dispatchEvent( eventType().complete );
	}
			
	/////////////////////////////////////////////////////////////////////////////////////////////////////
}

/////////////////////////////////////////////////////////////////////////////////////////////////////////