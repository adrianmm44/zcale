/////////////////////////////////////////////////////////////////////////////////////////////////////////

package zcale.core.web.webTools.targets;

import php.Web;
import haxe.ds.StringMap;

class PhpWebTools
{
	/////////////////////////////////////////////////////////////////////////////////////////////////////
	
	private static var cookies : StringMap<String>;
	
	/////////////////////////////////////////////////////////////////////////////////////////////////////
	
	public static function redirect( url : String ) : Void
	{
		Web.redirect( url );
	}
	
	/////////////////////////////////////////////////////////////////////////////////////////////////////
	
	public static function getCookies() : StringMap<String>
	{
		if( cookies == null ){
			cookies = Web.getCookies();
		}
		
		return cookies;
	}
	
	/////////////////////////////////////////////////////////////////////////////////////////////////////
	
	public static function getCookie( name : String ) : String
	{
		return getCookies().get( name );
	}
	
	/////////////////////////////////////////////////////////////////////////////////////////////////////
	
	public static function setCookie( name    : String, 
									  value   : String, 
									  ?expire : Date, 
									  ?domain : String, 
									  ?path   : String ) : Void
	{
		getCookies().set( name, value );
		
		Web.setCookie( name, value, expire, domain, path );
	}
	
	/////////////////////////////////////////////////////////////////////////////////////////////////////
	
	public static function removeCookie( name : String ) : Void
	{
		getCookies().remove( name );
		
		Web.setCookie( name, "", Date.fromTime( 0 ) );
	}
	
	/////////////////////////////////////////////////////////////////////////////////////////////////////
}

/////////////////////////////////////////////////////////////////////////////////////////////////////////