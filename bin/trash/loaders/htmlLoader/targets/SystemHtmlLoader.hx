/////////////////////////////////////////////////////////////////////////////////////////////////////////

package hxf.core.loaders.htmlLoader.targets;

import sys.io.File;
import hxf.core.loaders.htmlLoader.events.HtmlLoaderDispatcher;

class SystemHtmlLoader extends HtmlLoaderDispatcher
{
	/////////////////////////////////////////////////////////////////////////////////////////////////////
	
	public function new( sub : Dynamic, ?reg : Dynamic )
	{
		super( sub, reg );
	}
	
	/////////////////////////////////////////////////////////////////////////////////////////////////////
	
	public function load( filePath : String ) : Void
	{
		try 
		{
			var html : String = File.getContent( filePath );
						
			eventData().html 	   = html;
			eventData().remoteData = html;
			
			dispatchEvent( eventType().complete );
		}
		catch( errorMessage : Dynamic )
		{			
			dispatchError( eventData().error, this, "load", errorMessage );
		}
	}
	
	/////////////////////////////////////////////////////////////////////////////////////////////////////
}

/////////////////////////////////////////////////////////////////////////////////////////////////////////